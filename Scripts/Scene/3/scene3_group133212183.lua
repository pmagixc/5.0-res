-- 基础信息
local base_info = {
	group_id = 133212183
}

--================================================================
-- 
-- 配置
-- 
--================================================================

-- 怪物
monsters = {
	{ config_id = 183022, monster_id = 20010801, pos = { x = -3269.628, y = 200.452, z = -3249.274 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183023, monster_id = 20010801, pos = { x = -3268.564, y = 200.329, z = -3248.714 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183024, monster_id = 20010801, pos = { x = -3269.594, y = 200.324, z = -3247.948 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183025, monster_id = 20011201, pos = { x = -3314.116, y = 201.324, z = -3270.024 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183026, monster_id = 20011201, pos = { x = -3313.426, y = 201.199, z = -3271.231 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183027, monster_id = 20011201, pos = { x = -3312.536, y = 201.308, z = -3270.364 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183028, monster_id = 20011401, pos = { x = -3337.240, y = 200.592, z = -3273.940 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183029, monster_id = 20011401, pos = { x = -3338.209, y = 200.427, z = -3274.656 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183030, monster_id = 20011401, pos = { x = -3338.693, y = 200.526, z = -3273.456 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183031, monster_id = 21010501, pos = { x = -3355.737, y = 206.276, z = -3263.537 }, rot = { x = 0.000, y = 130.416, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183032, monster_id = 21011001, pos = { x = -3358.449, y = 205.490, z = -3273.686 }, rot = { x = 0.000, y = 106.513, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183057, monster_id = 20010801, pos = { x = -3286.728, y = 200.546, z = -3240.827 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183058, monster_id = 20010801, pos = { x = -3285.664, y = 200.422, z = -3240.267 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 },
	{ config_id = 183059, monster_id = 20010801, pos = { x = -3286.693, y = 200.418, z = -3239.501 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, drop_id = 1000100, disableWander = true, affix = { 1030 }, area_id = 12 }
}

-- NPC
npcs = {
}

-- 装置
gadgets = {
	{ config_id = 183001, gadget_id = 70350083, pos = { x = -3182.991, y = 200.078, z = -3265.650 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, persistent = true, area_id = 12 },
	{ config_id = 183002, gadget_id = 70900380, pos = { x = -3197.607, y = 204.593, z = -3266.752 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183003, gadget_id = 70900380, pos = { x = -3215.347, y = 208.781, z = -3266.712 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183004, gadget_id = 70900380, pos = { x = -3232.618, y = 204.593, z = -3266.399 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183006, gadget_id = 70900380, pos = { x = -3262.437, y = 206.591, z = -3255.007 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183007, gadget_id = 70900380, pos = { x = -3309.313, y = 207.805, z = -3259.494 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183008, gadget_id = 70900380, pos = { x = -3325.114, y = 205.917, z = -3278.748 }, rot = { x = 0.000, y = 348.450, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183009, gadget_id = 70900380, pos = { x = -3357.391, y = 205.522, z = -3268.570 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183010, gadget_id = 70360025, pos = { x = -3490.386, y = 200.282, z = -3253.893 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183014, gadget_id = 70900380, pos = { x = -3402.408, y = 209.380, z = -3264.372 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183015, gadget_id = 70900380, pos = { x = -3411.554, y = 213.178, z = -3252.917 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183016, gadget_id = 70900380, pos = { x = -3432.473, y = 214.029, z = -3264.951 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183017, gadget_id = 70900380, pos = { x = -3453.611, y = 214.488, z = -3260.049 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183018, gadget_id = 70900380, pos = { x = -3476.723, y = 208.596, z = -3256.959 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183020, gadget_id = 70220020, pos = { x = -3323.344, y = 200.539, z = -3276.807 }, rot = { x = 0.000, y = 285.693, z = 15.315 }, level = 1, area_id = 12 },
	{ config_id = 183021, gadget_id = 70220020, pos = { x = -3323.563, y = 200.025, z = -3280.896 }, rot = { x = 0.000, y = 264.497, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183035, gadget_id = 70710126, pos = { x = -3245.480, y = 200.159, z = -3264.340 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183037, gadget_id = 70710126, pos = { x = -3380.239, y = 200.157, z = -3273.499 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183039, gadget_id = 70350085, pos = { x = -3245.456, y = 200.803, z = -3264.418 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183040, gadget_id = 70350085, pos = { x = -3380.002, y = 202.314, z = -3273.759 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183041, gadget_id = 70350085, pos = { x = -3489.933, y = 201.507, z = -3254.186 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183043, gadget_id = 70900380, pos = { x = -3277.984, y = 205.501, z = -3243.282 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183044, gadget_id = 70220020, pos = { x = -3278.500, y = 200.413, z = -3243.591 }, rot = { x = 5.160, y = 298.233, z = 350.532 }, level = 1, area_id = 12 },
	{ config_id = 183045, gadget_id = 70220020, pos = { x = -3276.850, y = 200.161, z = -3242.344 }, rot = { x = 5.856, y = 310.895, z = 358.247 }, level = 1, area_id = 12 },
	{ config_id = 183046, gadget_id = 70220020, pos = { x = -3280.200, y = 202.036, z = -3248.675 }, rot = { x = 355.039, y = 274.210, z = 349.621 }, level = 1, area_id = 12 },
	{ config_id = 183049, gadget_id = 70330064, pos = { x = -3186.404, y = 200.096, z = -3263.762 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, interact_id = 35, area_id = 12 },
	{ config_id = 183050, gadget_id = 70330064, pos = { x = -3253.115, y = 200.305, z = -3263.188 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, interact_id = 35, area_id = 12 },
	{ config_id = 183051, gadget_id = 70330064, pos = { x = -3300.964, y = 201.041, z = -3242.829 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, interact_id = 35, area_id = 12 },
	{ config_id = 183052, gadget_id = 70330064, pos = { x = -3388.645, y = 200.025, z = -3270.521 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, interact_id = 35, area_id = 12 },
	{ config_id = 183053, gadget_id = 70290150, pos = { x = -3191.820, y = 203.188, z = -3266.792 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183054, gadget_id = 70290150, pos = { x = -3209.822, y = 209.127, z = -3266.979 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183055, gadget_id = 70290150, pos = { x = -3224.696, y = 206.650, z = -3266.685 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183060, gadget_id = 70220020, pos = { x = -3352.520, y = 200.547, z = -3267.247 }, rot = { x = 354.665, y = 305.631, z = 14.377 }, level = 1, area_id = 12 },
	{ config_id = 183061, gadget_id = 70220020, pos = { x = -3354.356, y = 200.118, z = -3271.541 }, rot = { x = 354.688, y = 284.342, z = 6.663 }, level = 1, area_id = 12 },
	{ config_id = 183062, gadget_id = 70300090, pos = { x = -3355.875, y = 200.821, z = -3263.513 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183063, gadget_id = 70300090, pos = { x = -3358.392, y = 200.057, z = -3273.556 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183064, gadget_id = 70290150, pos = { x = -3396.743, y = 204.237, z = -3265.774 }, rot = { x = 0.000, y = 22.750, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183065, gadget_id = 70290150, pos = { x = -3407.795, y = 211.453, z = -3258.093 }, rot = { x = 0.000, y = 22.750, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183066, gadget_id = 70290150, pos = { x = -3420.460, y = 213.498, z = -3258.365 }, rot = { x = 0.000, y = 22.750, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183067, gadget_id = 70290150, pos = { x = -3426.719, y = 212.980, z = -3261.983 }, rot = { x = 0.000, y = 13.182, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183068, gadget_id = 70290150, pos = { x = -3439.814, y = 212.854, z = -3263.675 }, rot = { x = 0.000, y = 13.182, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183069, gadget_id = 70290150, pos = { x = -3447.143, y = 213.959, z = -3262.572 }, rot = { x = 0.000, y = 13.182, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183072, gadget_id = 70290150, pos = { x = -3259.386, y = 203.751, z = -3260.622 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 },
	{ config_id = 183073, gadget_id = 70290150, pos = { x = -3351.760, y = 204.426, z = -3270.355 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 }
}

-- 区域
regions = {
	{ config_id = 183012, shape = RegionShape.SPHERE, radius = 5, pos = { x = -3489.257, y = 200.237, z = -3254.862 }, area_id = 12 },
	{ config_id = 183036, shape = RegionShape.SPHERE, radius = 3, pos = { x = -3245.569, y = 200.161, z = -3264.925 }, area_id = 12 },
	{ config_id = 183038, shape = RegionShape.SPHERE, radius = 5, pos = { x = -3380.281, y = 200.147, z = -3273.473 }, area_id = 12 }
}

-- 触发器
triggers = {
	{ config_id = 1183011, name = "GADGET_CREATE_183011", event = EventType.EVENT_GADGET_CREATE, source = "", condition = "condition_EVENT_GADGET_CREATE_183011", action = "action_EVENT_GADGET_CREATE_183011", trigger_count = 0 },
	{ config_id = 1183012, name = "ENTER_REGION_183012", event = EventType.EVENT_ENTER_REGION, source = "", condition = "condition_EVENT_ENTER_REGION_183012", action = "action_EVENT_ENTER_REGION_183012", tag = "183012" },
	{ config_id = 1183013, name = "SELECT_OPTION_183013", event = EventType.EVENT_SELECT_OPTION, source = "", condition = "condition_EVENT_SELECT_OPTION_183013", action = "action_EVENT_SELECT_OPTION_183013", trigger_count = 0 },
	{ config_id = 1183036, name = "ENTER_REGION_183036", event = EventType.EVENT_ENTER_REGION, source = "", condition = "condition_EVENT_ENTER_REGION_183036", action = "action_EVENT_ENTER_REGION_183036" },
	{ config_id = 1183038, name = "ENTER_REGION_183038", event = EventType.EVENT_ENTER_REGION, source = "", condition = "condition_EVENT_ENTER_REGION_183038", action = "action_EVENT_ENTER_REGION_183038" },
	{ config_id = 1183070, name = "CHALLENGE_SUCCESS_183070", event = EventType.EVENT_CHALLENGE_SUCCESS, source = "101", condition = "", action = "action_EVENT_CHALLENGE_SUCCESS_183070" },
	{ config_id = 1183071, name = "CHALLENGE_FAIL_183071", event = EventType.EVENT_CHALLENGE_FAIL, source = "101", condition = "", action = "action_EVENT_CHALLENGE_FAIL_183071", trigger_count = 0 },
	{ config_id = 1183074, name = "ANY_GADGET_DIE_183074", event = EventType.EVENT_ANY_GADGET_DIE, source = "", condition = "condition_EVENT_ANY_GADGET_DIE_183074", action = "action_EVENT_ANY_GADGET_DIE_183074", trigger_count = 0 },
	{ config_id = 1183075, name = "ANY_MONSTER_DIE_183075", event = EventType.EVENT_ANY_MONSTER_DIE, source = "", condition = "", action = "action_EVENT_ANY_MONSTER_DIE_183075", trigger_count = 0 }
}

-- 变量
variables = {
}

-- 废弃数据
garbages = {
	gadgets = {
		{ config_id = 183019, gadget_id = 70900380, pos = { x = -3471.679, y = 207.275, z = -3256.377 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 12 }
	},
	triggers = {
		{ config_id = 1183033, name = "GADGET_CREATE_183033", event = EventType.EVENT_GADGET_CREATE, source = "", condition = "condition_EVENT_GADGET_CREATE_183033", action = "" },
		{ config_id = 1183034, name = "TIMER_EVENT_183034", event = EventType.EVENT_TIMER_EVENT, source = "replace", condition = "", action = "action_EVENT_TIMER_EVENT_183034", trigger_count = 0 },
		{ config_id = 1183042, name = "TIMER_EVENT_183042", event = EventType.EVENT_TIMER_EVENT, source = "replace1", condition = "", action = "action_EVENT_TIMER_EVENT_183042", trigger_count = 0 }
	}
}

--================================================================
-- 
-- 初始化配置
-- 
--================================================================

-- 初始化时创建
init_config = {
	suite = 1,
	end_suite = 0,
	rand_suite = false
}

--================================================================
-- 
-- 小组配置
-- 
--================================================================

suites = {
	{
		-- suite_id = 1,
		-- description = ,
		monsters = { },
		gadgets = { 183001 },
		regions = { },
		triggers = { "GADGET_CREATE_183011", "SELECT_OPTION_183013", "CHALLENGE_SUCCESS_183070", "CHALLENGE_FAIL_183071", "ANY_GADGET_DIE_183074", "ANY_MONSTER_DIE_183075" },
		rand_weight = 100
	},
	{
		-- suite_id = 2,
		-- description = ,
		monsters = { },
		gadgets = { 183002, 183003, 183004, 183035, 183039, 183049, 183053, 183054, 183055 },
		regions = { 183036 },
		triggers = { "ENTER_REGION_183036" },
		rand_weight = 100
	},
	{
		-- suite_id = 3,
		-- description = ,
		monsters = { 183022, 183023, 183024, 183025, 183026, 183027, 183028, 183029, 183030, 183031, 183032, 183057, 183058, 183059 },
		gadgets = { 183006, 183007, 183008, 183009, 183020, 183021, 183037, 183040, 183043, 183044, 183045, 183046, 183050, 183051, 183060, 183061, 183062, 183063, 183072, 183073 },
		regions = { 183038 },
		triggers = { "ENTER_REGION_183038" },
		rand_weight = 100
	},
	{
		-- suite_id = 4,
		-- description = ,
		monsters = { },
		gadgets = { 183010, 183014, 183015, 183016, 183017, 183018, 183041, 183052, 183064, 183065, 183066, 183067, 183068, 183069 },
		regions = { 183012 },
		triggers = { "ENTER_REGION_183012" },
		rand_weight = 100
	},
	{
		-- suite_id = 5,
		-- description = ,
		monsters = { },
		gadgets = { },
		regions = { },
		triggers = { },
		rand_weight = 100
	}
}

--================================================================
-- 
-- 触发器
-- 
--================================================================

-- 触发条件
function condition_EVENT_GADGET_CREATE_183011(context, evt)
	if 183001 ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_CREATE_183011(context, evt)
	-- 设置操作台选项
	if 0 ~= ScriptLib.SetWorktopOptionsByGroupId(context, 133212183, 183001, {175}) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : set_wok_options_by_configid")
		return -1
	end
	
	return 0
end

-- 触发条件
function condition_EVENT_ENTER_REGION_183012(context, evt)
	if evt.param1 ~= 183012 then return false end
	
	-- 判断角色数量不少于1
	if ScriptLib.GetRegionEntityCount(context, { region_eid = evt.source_eid, entity_type = EntityType.AVATAR }) < 1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_ENTER_REGION_183012(context, evt)
	-- 终止识别id为101的挑战，并判定成功
		ScriptLib.StopChallenge(context, 101, 1)
	
	return 0
end

-- 触发条件
function condition_EVENT_SELECT_OPTION_183013(context, evt)
	-- 判断是gadgetid 183001 option_id 175
	if 183001 ~= evt.param1 then
		return false	
	end
	
	if 175 ~= evt.param2 then
		return false
	end
	
	
	return true
end

-- 触发操作
function action_EVENT_SELECT_OPTION_183013(context, evt)
	-- 开启操作台时确认当前有没有其他稻妻试炼的飞雷核挑战在进行
	if 0 ~= ScriptLib.GetGroupTempValue(context, "ElectricCorePlayHasStarted", {}) then
	    ScriptLib.ShowReminder(context, 400046)
	    return 0
	end
	
	
	if true == ScriptLib.CheckIsInMpMode(context) then
	    ScriptLib.ShowReminder(context, 400053)
	        return -1
	end
	-- 删除指定group： 133212183 ；指定config：183001；物件身上指定option：175；
	if 0 ~= ScriptLib.DelWorktopOptionByGroupId(context, 133212183, 183001, 175) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : del_work_options_by_group_configId")
	  return -1
	end
	
	-- 将configid为 183001 的物件更改为状态 GadgetState.GearStart
	if 0 ~= ScriptLib.SetGadgetStateByConfigId(context, 183001, GadgetState.GearStart) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : set_gadget_state_by_configId")
	    return -1
	  end 
	
	-- 添加suite2的新内容
	    ScriptLib.AddExtraGroupSuite(context, 133212183, 2)
	
	----------------------------------------------------------------------------------------------------------------------------
	-- 创建编号为111167父挑战，indexID为101
	if 0 ~= ScriptLib.CreateFatherChallenge(context, 101, 111167, 60, {success = 1, fail = 1, fail_on_wipe=true}) then
	        return -1
	end
	
	
	-- 创建编号为111172的子挑战：无用子挑战
	if 0 ~= ScriptLib.AttachChildChallenge(context, 101, 201, 111172, {999,1,1,1},{},{success=0,fail=0}) then
	        return -1
	end
	
	-- 开始父挑战
	if 0 ~= ScriptLib.StartFatherChallenge(context, 101) then
	        return -1
	end
	
	-- 挑战开启将'ElectricCorePlayHasStarted'改为1
	local challenge_groups = {133220053,133220172,133212361,133212185,133212183,133212033}
	    for k,grp_id in pairs(challenge_groups) do
	                ScriptLib.SetGroupTempValue(context, "ElectricCorePlayHasStarted", 1, {group_id = grp_id})
	    end
	
	
	        local uid_list = ScriptLib.GetSceneUidList(context)
	        ScriptLib.SetGroupTempValue(context, "optimize_"..uid_list[1], 1, { group_id = 133212183})
	        ScriptLib.SetPlayerGroupVisionType(context, {uid_list[1]}, {0})
	
	
	return 0
end

-- 触发条件
function condition_EVENT_ENTER_REGION_183036(context, evt)
	if evt.param1 ~= 183036 then return false end
	
	-- 判断角色数量不少于1
	if ScriptLib.GetRegionEntityCount(context, { region_eid = evt.source_eid, entity_type = EntityType.AVATAR }) < 1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_ENTER_REGION_183036(context, evt)
	-- 添加suite3的新内容
	    ScriptLib.AddExtraGroupSuite(context, 133212183, 3)
	
	-- 删除suite2的所有内容
	    ScriptLib.RemoveExtraGroupSuite(context, 133212183, 2)
	
	return 0
end

-- 触发条件
function condition_EVENT_ENTER_REGION_183038(context, evt)
	if evt.param1 ~= 183038 then return false end
	
	-- 判断角色数量不少于1
	if ScriptLib.GetRegionEntityCount(context, { region_eid = evt.source_eid, entity_type = EntityType.AVATAR }) < 1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_ENTER_REGION_183038(context, evt)
	-- 添加suite4的新内容
	    ScriptLib.AddExtraGroupSuite(context, 133212183, 4)
	
	-- 删除suite3的所有内容
	    ScriptLib.RemoveExtraGroupSuite(context, 133212183, 3)
	
	return 0
end

-- 触发操作
function action_EVENT_CHALLENGE_SUCCESS_183070(context, evt)
	-- 挑战结束将'ElectricCorePlayHasStarted'改为0
	local challenge_groups = {133220053,133220172,133212361,133212185,133212183,133212033}
	    for k,grp_id in pairs(challenge_groups) do
	                ScriptLib.SetGroupTempValue(context, "ElectricCorePlayHasStarted", 0, {group_id = grp_id})
	    end
	
	
	        local uid_list = ScriptLib.GetSceneUidList(context)
	        ScriptLib.SetGroupTempValue(context, "optimize_"..uid_list[1], 0, { group_id = 133212183})
	
		-- 重新生成指定group，指定suite
		if 0 ~= ScriptLib.RefreshGroup(context, { group_id = 133212183, suite = 1 }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : refresh_group_to_suite")
			return -1
		end
	
	
	return 0
end

-- 触发操作
function action_EVENT_CHALLENGE_FAIL_183071(context, evt)
	-- 挑战结束将'ElectricCorePlayHasStarted'改为0
	local challenge_groups = {133220053,133220172,133212361,133212185,133212183,133212033}
	    for k,grp_id in pairs(challenge_groups) do
	                ScriptLib.SetGroupTempValue(context, "ElectricCorePlayHasStarted", 0, {group_id = grp_id})
	    end
	
	
	        local uid_list = ScriptLib.GetSceneUidList(context)
	        ScriptLib.SetGroupTempValue(context, "optimize_"..uid_list[1], 0, { group_id = 133212183})
	
		-- 重新生成指定group，指定suite
		if 0 ~= ScriptLib.RefreshGroup(context, { group_id = 133212183, suite = 1 }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : refresh_group_to_suite")
			return -1
		end
	
	
	return 0
end

-- 触发条件
function condition_EVENT_ANY_GADGET_DIE_183074(context, evt)
	if (183053~= evt.param1) and (183054~= evt.param1) and (183055~= evt.param1) and (183064~= evt.param1) and (183065~= evt.param1) and (183066~= evt.param1) and (183067~= evt.param1) and (183068~= evt.param1) and (183069~= evt.param1) and (183072~= evt.param1) and (183073~= evt.param1) then
	  return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_ANY_GADGET_DIE_183074(context, evt)
	-- 增加时间
	  ScriptLib.ModifyFatherChallengeProperty(context, 101, FatherChallengeProperty.DURATION, 5)
	
	return 0
end

-- 触发操作
function action_EVENT_ANY_MONSTER_DIE_183075(context, evt)
	-- 增加时间
	  ScriptLib.ModifyFatherChallengeProperty(context, 101, FatherChallengeProperty.DURATION, 5)
	
	return 0
end

require "V2_0/ElectricCore"