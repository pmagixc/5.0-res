-- 基础信息
local base_info = {
	group_id = 133002286
}

--================================================================
-- 
-- 配置
-- 
--================================================================

-- 怪物
monsters = {
}

-- NPC
npcs = {
}

-- 装置
gadgets = {
	{ config_id = 2393, gadget_id = 70300109, pos = { x = 1718.812, y = 205.825, z = -471.992 }, rot = { x = 0.000, y = 233.703, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2394, gadget_id = 70210102, pos = { x = 1725.293, y = 208.589, z = -494.593 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 6, chest_drop_id = 1000100, drop_count = 1, area_id = 3 },
	{ config_id = 2395, gadget_id = 70300109, pos = { x = 1720.555, y = 207.491, z = -491.103 }, rot = { x = 0.000, y = 143.489, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2396, gadget_id = 70300109, pos = { x = 1705.736, y = 205.125, z = -470.426 }, rot = { x = 0.000, y = 291.666, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2397, gadget_id = 70210102, pos = { x = 1696.375, y = 205.001, z = -455.414 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 6, chest_drop_id = 1000100, drop_count = 1, area_id = 3 },
	{ config_id = 2398, gadget_id = 70300109, pos = { x = 1687.817, y = 202.752, z = -475.117 }, rot = { x = 0.000, y = 306.372, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2399, gadget_id = 70300109, pos = { x = 1674.247, y = 201.895, z = -461.292 }, rot = { x = 0.000, y = 322.398, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2401, gadget_id = 70210102, pos = { x = 1699.897, y = 204.594, z = -467.754 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 6, chest_drop_id = 1000100, drop_count = 1, area_id = 3 },
	{ config_id = 2402, gadget_id = 70210102, pos = { x = 1696.202, y = 204.902, z = -455.882 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 6, chest_drop_id = 1000200, drop_count = 1, area_id = 3 },
	{ config_id = 2403, gadget_id = 70210102, pos = { x = 1700.485, y = 204.624, z = -467.665 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 6, chest_drop_id = 1000200, drop_count = 1, area_id = 3 },
	{ config_id = 2404, gadget_id = 70220026, pos = { x = 1796.542, y = 218.294, z = -379.223 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2405, gadget_id = 70220026, pos = { x = 1772.509, y = 213.177, z = -340.716 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2406, gadget_id = 70300109, pos = { x = 1660.421, y = 201.895, z = -439.501 }, rot = { x = 0.000, y = 11.667, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2407, gadget_id = 70300109, pos = { x = 1720.301, y = 206.197, z = -464.232 }, rot = { x = 0.000, y = 187.307, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2408, gadget_id = 70300109, pos = { x = 1701.888, y = 205.307, z = -452.926 }, rot = { x = 0.000, y = 237.868, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2446, gadget_id = 70300109, pos = { x = 1669.810, y = 202.449, z = -431.493 }, rot = { x = 0.000, y = 81.589, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 2479, gadget_id = 70300109, pos = { x = 1711.105, y = 206.303, z = -452.793 }, rot = { x = 0.000, y = 257.564, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 286001, gadget_id = 70300109, pos = { x = 1720.971, y = 210.032, z = -448.457 }, rot = { x = 350.873, y = 238.988, z = 340.708 }, level = 10, area_id = 3 },
	{ config_id = 286002, gadget_id = 70300109, pos = { x = 1734.647, y = 213.988, z = -445.841 }, rot = { x = 350.873, y = 260.243, z = 340.708 }, level = 10, area_id = 3 },
	{ config_id = 286003, gadget_id = 70300109, pos = { x = 1748.733, y = 216.312, z = -443.774 }, rot = { x = 350.873, y = 260.243, z = 340.708 }, level = 10, area_id = 3 },
	{ config_id = 286004, gadget_id = 70300109, pos = { x = 1761.272, y = 217.601, z = -444.449 }, rot = { x = 350.873, y = 260.243, z = 340.708 }, level = 10, area_id = 3 },
	{ config_id = 286005, gadget_id = 70300109, pos = { x = 1772.497, y = 217.701, z = -444.298 }, rot = { x = 350.873, y = 260.243, z = 340.708 }, level = 10, area_id = 3 },
	{ config_id = 286006, gadget_id = 70300109, pos = { x = 1780.906, y = 217.772, z = -442.225 }, rot = { x = 350.873, y = 260.243, z = 340.708 }, level = 10, area_id = 3 },
	{ config_id = 286007, gadget_id = 70300109, pos = { x = 1788.573, y = 217.415, z = -442.616 }, rot = { x = 350.873, y = 260.243, z = 340.708 }, level = 10, area_id = 3 },
	{ config_id = 286008, gadget_id = 70300109, pos = { x = 1714.541, y = 205.512, z = -475.862 }, rot = { x = 0.000, y = 168.468, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 286009, gadget_id = 70300109, pos = { x = 1717.638, y = 206.228, z = -483.805 }, rot = { x = 0.000, y = 168.931, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 286010, gadget_id = 70300109, pos = { x = 1716.601, y = 207.599, z = -451.911 }, rot = { x = 0.000, y = 188.149, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 286011, gadget_id = 70300109, pos = { x = 1716.713, y = 206.652, z = -457.824 }, rot = { x = 0.000, y = 148.285, z = 0.000 }, level = 10, area_id = 3 },
	{ config_id = 286012, gadget_id = 70300109, pos = { x = 1713.778, y = 205.505, z = -472.229 }, rot = { x = 0.000, y = 281.346, z = 0.000 }, level = 10, area_id = 3 }
}

-- 区域
regions = {
}

-- 触发器
triggers = {
	{ config_id = 1000387, name = "GADGET_STATE_CHANGE_387", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_387", action = "action_EVENT_GADGET_STATE_CHANGE_387", trigger_count = 0 },
	{ config_id = 1000388, name = "GADGET_STATE_CHANGE_388", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_388", action = "action_EVENT_GADGET_STATE_CHANGE_388" },
	{ config_id = 1000389, name = "GADGET_STATE_CHANGE_389", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_389", action = "action_EVENT_GADGET_STATE_CHANGE_389" },
	{ config_id = 1000390, name = "GADGET_STATE_CHANGE_390", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_390", action = "action_EVENT_GADGET_STATE_CHANGE_390" }
}

-- 变量
variables = {
}

--================================================================
-- 
-- 初始化配置
-- 
--================================================================

-- 初始化时创建
init_config = {
	suite = 1,
	end_suite = 0,
	rand_suite = false
}

--================================================================
-- 
-- 小组配置
-- 
--================================================================

suites = {
	{
		-- suite_id = 1,
		-- description = ,
		monsters = { },
		gadgets = { },
		regions = { },
		triggers = { },
		rand_weight = 100
	},
	{
		-- suite_id = 2,
		-- description = suite_2,
		monsters = { },
		gadgets = { 2393, 2394, 2395, 2396, 2401, 2402, 2404, 2405, 2407, 2408, 2479, 286001, 286002, 286003, 286004, 286005, 286006, 286007, 286008, 286009, 286010, 286011, 286012 },
		regions = { },
		triggers = { "GADGET_STATE_CHANGE_387", "GADGET_STATE_CHANGE_388", "GADGET_STATE_CHANGE_389", "GADGET_STATE_CHANGE_390" },
		rand_weight = 100
	},
	{
		-- suite_id = 3,
		-- description = suite_3,
		monsters = { },
		gadgets = { 2393, 2394, 2395, 2396, 2397, 2403, 2404, 2405, 2407, 2408, 2479, 286001, 286002, 286003, 286004, 286005, 286006, 286007, 286008, 286009, 286010, 286011, 286012 },
		regions = { },
		triggers = { "GADGET_STATE_CHANGE_387", "GADGET_STATE_CHANGE_388", "GADGET_STATE_CHANGE_389", "GADGET_STATE_CHANGE_390" },
		rand_weight = 100
	}
}

--================================================================
-- 
-- 触发器
-- 
--================================================================

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_387(context, evt)
	if 2394 == evt.param2 and GadgetState.ChestOpened == evt.param1 then
		return true
	end
	
	if 2401 == evt.param2 and GadgetState.ChestOpened == evt.param1 then
		return true
	end
	
	if 2397 == evt.param2 and GadgetState.ChestOpened == evt.param1 then
		return true
	end
	
	return false
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_387(context, evt)
	-- 调用提示id为 1110004 的提示UI，会显示在屏幕中央偏下位置，id索引自 ReminderData表格
	if 0 ~= ScriptLib.ShowReminder(context, 1110004) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : active_reminder_ui")
		return -1
	end
	
	return 0
end

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_388(context, evt)
	if 2394 ~= evt.param2 or GadgetState.ChestOpened ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_388(context, evt)
		-- 杀死Group内指定的monster和gadget
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133002286, monsters = {}, gadgets = {2395,2480} }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : kill_monsters_and_gadgets_by_group")
			return -1
		end
	
	return 0
end

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_389(context, evt)
	if 2401 ~= evt.param2 or GadgetState.ChestOpened ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_389(context, evt)
		-- 杀死Group内指定的monster和gadget
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133002286, monsters = {}, gadgets = {2396} }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : kill_monsters_and_gadgets_by_group")
			return -1
		end
	
	return 0
end

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_390(context, evt)
	if 2397 ~= evt.param2 or GadgetState.ChestOpened ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_390(context, evt)
		-- 杀死Group内指定的monster和gadget
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133002286, monsters = {}, gadgets = {2408} }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : kill_monsters_and_gadgets_by_group")
			return -1
		end
	
	return 0
end