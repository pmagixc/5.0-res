-- 基础信息
local base_info = {
	group_id = 133002050
}

--================================================================
-- 
-- 配置
-- 
--================================================================

-- 怪物
monsters = {
}

-- NPC
npcs = {
}

-- 装置
gadgets = {
	{ config_id = 50001, gadget_id = 70690017, pos = { x = 949.135, y = 341.845, z = -611.193 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 5, area_id = 10 },
	{ config_id = 50002, gadget_id = 70690001, pos = { x = 949.160, y = 354.845, z = -616.179 }, rot = { x = 359.948, y = 189.982, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50004, gadget_id = 70690001, pos = { x = 946.733, y = 354.857, z = -629.967 }, rot = { x = 359.948, y = 189.982, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50005, gadget_id = 70690001, pos = { x = 945.520, y = 354.864, z = -636.861 }, rot = { x = 359.949, y = 189.983, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50006, gadget_id = 70690017, pos = { x = 943.620, y = 348.438, z = -647.593 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50007, gadget_id = 70690001, pos = { x = 943.620, y = 357.985, z = -647.593 }, rot = { x = 270.271, y = 235.152, z = 0.002 }, level = 1, area_id = 10 },
	{ config_id = 50008, gadget_id = 70690001, pos = { x = 943.593, y = 364.985, z = -647.612 }, rot = { x = 270.265, y = 235.067, z = 0.001 }, level = 1, area_id = 10 },
	{ config_id = 50009, gadget_id = 70690001, pos = { x = 926.238, y = 373.628, z = -750.873 }, rot = { x = 21.328, y = 182.963, z = 0.792 }, level = 1, area_id = 10 },
	{ config_id = 50013, gadget_id = 70690017, pos = { x = 1024.988, y = 344.041, z = -945.374 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50014, gadget_id = 70690001, pos = { x = 920.944, y = 348.165, z = -814.302 }, rot = { x = 9.953, y = 134.494, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50015, gadget_id = 70690017, pos = { x = 943.538, y = 367.951, z = -657.763 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50016, gadget_id = 70690001, pos = { x = 942.558, y = 379.951, z = -666.199 }, rot = { x = 341.531, y = 184.706, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50017, gadget_id = 70690001, pos = { x = 942.014, y = 382.168, z = -672.816 }, rot = { x = 341.532, y = 184.706, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50018, gadget_id = 70690001, pos = { x = 925.848, y = 346.958, z = -819.119 }, rot = { x = 1.201, y = 120.841, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50019, gadget_id = 70690001, pos = { x = 931.831, y = 346.812, z = -822.692 }, rot = { x = 3.833, y = 123.641, z = 332.806 }, level = 1, area_id = 10 },
	{ config_id = 50020, gadget_id = 70690001, pos = { x = 938.920, y = 385.436, z = -690.638 }, rot = { x = 359.543, y = 220.594, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50023, gadget_id = 70690017, pos = { x = 925.256, y = 371.158, z = -709.553 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50024, gadget_id = 70690001, pos = { x = 924.531, y = 385.708, z = -709.872 }, rot = { x = 357.546, y = 173.553, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50028, gadget_id = 70690001, pos = { x = 926.708, y = 381.243, z = -739.302 }, rot = { x = 35.692, y = 182.275, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50029, gadget_id = 70690001, pos = { x = 926.482, y = 377.160, z = -744.983 }, rot = { x = 30.924, y = 182.372, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50030, gadget_id = 70690001, pos = { x = 926.238, y = 373.628, z = -750.873 }, rot = { x = 342.657, y = 5.948, z = 176.772 }, level = 1, area_id = 10 },
	{ config_id = 50032, gadget_id = 70690017, pos = { x = 923.023, y = 352.320, z = -767.064 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50033, gadget_id = 70690001, pos = { x = 923.304, y = 367.874, z = -769.795 }, rot = { x = 26.455, y = 187.406, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50034, gadget_id = 70690001, pos = { x = 922.502, y = 364.776, z = -775.970 }, rot = { x = 24.903, y = 185.633, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50035, gadget_id = 70690001, pos = { x = 921.878, y = 361.828, z = -782.288 }, rot = { x = 24.903, y = 185.633, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50036, gadget_id = 70690001, pos = { x = 921.255, y = 358.881, z = -788.607 }, rot = { x = 29.124, y = 186.871, z = 0.529 }, level = 1, area_id = 10 },
	{ config_id = 50038, gadget_id = 70690017, pos = { x = 919.012, y = 332.000, z = -812.281 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50044, gadget_id = 70690017, pos = { x = 943.025, y = 331.430, z = -839.346 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50046, gadget_id = 70690001, pos = { x = 943.025, y = 346.430, z = -845.219 }, rot = { x = 3.375, y = 186.678, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50047, gadget_id = 70690001, pos = { x = 942.213, y = 346.018, z = -852.159 }, rot = { x = 357.207, y = 159.460, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50048, gadget_id = 70690001, pos = { x = 944.561, y = 346.344, z = -858.427 }, rot = { x = 355.066, y = 149.616, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50059, gadget_id = 70690001, pos = { x = 981.641, y = 334.698, z = -907.375 }, rot = { x = 0.334, y = 123.645, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50060, gadget_id = 70690001, pos = { x = 987.468, y = 334.657, z = -911.254 }, rot = { x = 0.334, y = 123.645, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50062, gadget_id = 70690001, pos = { x = 999.123, y = 334.576, z = -919.010 }, rot = { x = 357.181, y = 125.557, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50063, gadget_id = 70690001, pos = { x = 1004.739, y = 334.916, z = -923.025 }, rot = { x = 337.070, y = 137.822, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50064, gadget_id = 70690001, pos = { x = 1009.067, y = 337.643, z = -927.802 }, rot = { x = 335.214, y = 137.823, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50065, gadget_id = 70690001, pos = { x = 1013.334, y = 340.577, z = -932.511 }, rot = { x = 332.812, y = 137.823, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50066, gadget_id = 70690001, pos = { x = 1017.514, y = 343.775, z = -937.125 }, rot = { x = 328.732, y = 137.822, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50067, gadget_id = 70690001, pos = { x = 1021.530, y = 347.407, z = -941.557 }, rot = { x = 317.719, y = 137.823, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50068, gadget_id = 70690001, pos = { x = 1024.988, y = 352.091, z = -945.374 }, rot = { x = 270.613, y = 149.663, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50069, gadget_id = 70690001, pos = { x = 1025.026, y = 359.067, z = -945.439 }, rot = { x = 270.114, y = 212.850, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50070, gadget_id = 70690001, pos = { x = 1025.017, y = 366.067, z = -945.452 }, rot = { x = 270.114, y = 212.722, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50071, gadget_id = 70690001, pos = { x = 1025.009, y = 373.067, z = -945.466 }, rot = { x = 270.115, y = 213.329, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50072, gadget_id = 70690001, pos = { x = 1025.000, y = 380.067, z = -945.479 }, rot = { x = 270.122, y = 212.121, z = -0.002 }, level = 1, area_id = 10 },
	{ config_id = 50077, gadget_id = 70690017, pos = { x = 1018.663, y = 387.355, z = -939.580 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50078, gadget_id = 70690001, pos = { x = 1014.120, y = 399.423, z = -935.570 }, rot = { x = 350.484, y = 310.216, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50079, gadget_id = 70690001, pos = { x = 1008.848, y = 400.580, z = -931.113 }, rot = { x = 350.484, y = 310.216, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50081, gadget_id = 70690001, pos = { x = 998.304, y = 402.894, z = -922.198 }, rot = { x = 350.484, y = 310.216, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50083, gadget_id = 70690001, pos = { x = 987.761, y = 405.209, z = -913.283 }, rot = { x = 350.484, y = 310.216, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50084, gadget_id = 70690001, pos = { x = 982.489, y = 406.366, z = -908.825 }, rot = { x = 350.038, y = 310.192, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50085, gadget_id = 70690001, pos = { x = 977.227, y = 407.576, z = -904.380 }, rot = { x = 336.557, y = 309.412, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50086, gadget_id = 70690001, pos = { x = 972.266, y = 410.361, z = -900.302 }, rot = { x = 336.557, y = 309.411, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50087, gadget_id = 70690001, pos = { x = 967.304, y = 413.146, z = -896.225 }, rot = { x = 336.557, y = 309.411, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50088, gadget_id = 70690001, pos = { x = 962.342, y = 415.931, z = -892.148 }, rot = { x = 336.557, y = 309.412, z = 0.000 }, level = 1, area_id = 10 },
	{ config_id = 50092, gadget_id = 70690001, pos = { x = 936.498, y = 421.619, z = -871.722 }, rot = { x = 354.938, y = 309.065, z = 2.300 }, level = 1, area_id = 10 }
}

-- 区域
regions = {
	{ config_id = 50011, shape = RegionShape.SPHERE, radius = 25, pos = { x = 903.833, y = 412.457, z = -826.728 }, area_id = 10 }
}

-- 触发器
triggers = {
	{ config_id = 1050010, name = "GROUP_LOAD_50010", event = EventType.EVENT_GROUP_LOAD, source = "", condition = "", action = "action_EVENT_GROUP_LOAD_50010" },
	{ config_id = 1050011, name = "ENTER_REGION_50011", event = EventType.EVENT_ENTER_REGION, source = "", condition = "condition_EVENT_ENTER_REGION_50011", action = "action_EVENT_ENTER_REGION_50011" },
	{ config_id = 1050012, name = "TIME_AXIS_PASS_50012", event = EventType.EVENT_TIME_AXIS_PASS, source = "T1", condition = "", action = "action_EVENT_TIME_AXIS_PASS_50012" }
}

-- 变量
variables = {
}

-- 废弃数据
garbages = {
	gadgets = {
		{ config_id = 50003, gadget_id = 70690001, pos = { x = 947.947, y = 354.851, z = -623.073 }, rot = { x = 359.949, y = 189.983, z = 0.000 }, level = 1, area_id = 10 },
		{ config_id = 50061, gadget_id = 70690001, pos = { x = 993.296, y = 334.617, z = -915.132 }, rot = { x = 0.334, y = 123.645, z = 0.000 }, level = 1, area_id = 10 },
		{ config_id = 50080, gadget_id = 70690001, pos = { x = 1003.576, y = 401.737, z = -926.655 }, rot = { x = 350.484, y = 310.216, z = 0.000 }, level = 1, area_id = 10 },
		{ config_id = 50082, gadget_id = 70690001, pos = { x = 993.033, y = 404.052, z = -917.740 }, rot = { x = 350.484, y = 310.216, z = 0.000 }, level = 1, area_id = 10 }
	}
}

--================================================================
-- 
-- 初始化配置
-- 
--================================================================

-- 初始化时创建
init_config = {
	suite = 1,
	end_suite = 0,
	rand_suite = false
}

--================================================================
-- 
-- 小组配置
-- 
--================================================================

suites = {
	{
		-- suite_id = 1,
		-- description = ,
		monsters = { },
		gadgets = { 50001, 50002, 50004, 50005, 50006, 50007, 50008, 50009, 50013, 50014, 50015, 50016, 50017, 50018, 50019, 50020, 50023, 50024, 50028, 50029, 50030, 50032, 50033, 50034, 50035, 50036, 50038, 50044, 50046, 50047, 50048, 50059, 50060, 50062, 50063, 50064, 50065, 50066, 50067, 50068, 50069, 50070, 50071, 50072, 50077, 50078, 50079, 50081, 50083, 50084, 50085, 50086, 50087, 50088, 50092 },
		regions = { 50011 },
		triggers = { "GROUP_LOAD_50010", "ENTER_REGION_50011", "TIME_AXIS_PASS_50012" },
		rand_weight = 100
	},
	{
		-- suite_id = 2,
		-- description = ,
		monsters = { },
		gadgets = { },
		regions = { },
		triggers = { },
		rand_weight = 100
	}
}

--================================================================
-- 
-- 触发器
-- 
--================================================================

-- 触发操作
function action_EVENT_GROUP_LOAD_50010(context, evt)
	-- 创建标识为"T1"，时间节点为{3}的时间轴，false用于控制该时间轴是否循环
	ScriptLib.InitTimeAxis(context, "T1", {3}, false)
	
	
	return 0
end

-- 触发条件
function condition_EVENT_ENTER_REGION_50011(context, evt)
	if evt.param1 ~= 50011 then return false end
	
	-- 判断角色数量不少于1
	if ScriptLib.GetRegionEntityCount(context, { region_eid = evt.source_eid, entity_type = EntityType.AVATAR }) < 1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_ENTER_REGION_50011(context, evt)
	-- 删除suite1的所有内容
	    ScriptLib.RemoveExtraGroupSuite(context, 133002050, 1)
	
	return 0
end

-- 触发操作
function action_EVENT_TIME_AXIS_PASS_50012(context, evt)
	-- 触发镜头注目，注目位置为坐标（949.16，354.8445，-616.1792），持续时间为3秒，并且为强制注目形式，不广播其他玩家
		local pos = {x=949.16, y=354.8445, z=-616.1792}
	  local pos_follow = {x=0, y=0, z=0}
	    if 0 ~= ScriptLib.BeginCameraSceneLook(context, { look_pos = pos, is_allow_input = true, duration = 3, is_force = true, is_broadcast = false, is_recover_keep_current = true, delay = 0,
	                                                      is_set_follow_pos = false, follow_pos = pos_follow, is_force_walk = false, is_change_play_mode = false,
	                                                      is_set_screen_XY = false, screen_x = 0, screen_y = 0 }) then
					ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : active_cameraLook_Begin")
	        return -1
				end 
	
	-- 调用提示id为 400071 的提示UI，会显示在屏幕中央偏下位置，id索引自 ReminderData表格
	if 0 ~= ScriptLib.ShowReminder(context, 400071) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : active_reminder_ui")
		return -1
	end
	
	return 0
end