-- 基础信息
local base_info = {
	group_id = 133212034
}

--================================================================
-- 
-- 配置
-- 
--================================================================

-- 怪物
monsters = {
}

-- NPC
npcs = {
	{ config_id = 34002, npc_id = 20235, pos = { x = -3832.158, y = 295.065, z = -2354.323 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, area_id = 13 },
	{ config_id = 34005, npc_id = 20253, pos = { x = -3832.158, y = 295.065, z = -2354.323 }, rot = { x = 13.622, y = 108.981, z = 8.362 }, area_id = 13 },
	{ config_id = 34006, npc_id = 20256, pos = { x = -3832.158, y = 295.065, z = -2354.323 }, rot = { x = 13.622, y = 108.981, z = 8.362 }, area_id = 13 }
}

-- 装置
gadgets = {
	{ config_id = 34001, gadget_id = 70290122, pos = { x = -3832.845, y = 293.711, z = -2354.389 }, rot = { x = 1.924, y = 75.807, z = 359.758 }, level = 1, persistent = true, area_id = 13 },
	{ config_id = 34003, gadget_id = 70290135, pos = { x = -3831.670, y = 294.276, z = -2339.094 }, rot = { x = 355.182, y = 350.626, z = 347.098 }, level = 27, area_id = 13 },
	{ config_id = 34004, gadget_id = 70290135, pos = { x = -3833.900, y = 270.509, z = -2321.043 }, rot = { x = 351.661, y = 333.990, z = 349.018 }, level = 27, area_id = 13 },
	{ config_id = 34009, gadget_id = 70290135, pos = { x = -3814.237, y = 238.779, z = -2363.913 }, rot = { x = 0.000, y = 341.677, z = 0.000 }, level = 27, area_id = 13 },
	{ config_id = 34010, gadget_id = 70290135, pos = { x = -3841.009, y = 271.835, z = -2305.826 }, rot = { x = 348.673, y = 315.872, z = 352.138 }, level = 27, area_id = 13 },
	{ config_id = 34011, gadget_id = 70290135, pos = { x = -3850.884, y = 271.738, z = -2290.753 }, rot = { x = 350.242, y = 326.145, z = 350.254 }, level = 27, area_id = 13 },
	{ config_id = 34012, gadget_id = 70290135, pos = { x = -3865.022, y = 270.173, z = -2268.354 }, rot = { x = 352.921, y = 340.286, z = 348.172 }, level = 27, area_id = 13 },
	{ config_id = 34013, gadget_id = 70290135, pos = { x = -3892.727, y = 254.644, z = -2237.087 }, rot = { x = 10.977, y = 346.427, z = 348.871 }, level = 27, area_id = 13 },
	{ config_id = 34014, gadget_id = 70950112, pos = { x = -3828.900, y = 292.705, z = -2356.358 }, rot = { x = 284.927, y = 79.116, z = 282.077 }, level = 27, area_id = 13 },
	{ config_id = 34015, gadget_id = 70290135, pos = { x = -3830.757, y = 293.676, z = -2346.418 }, rot = { x = 0.000, y = 358.624, z = 0.000 }, level = 27, area_id = 13 },
	{ config_id = 34016, gadget_id = 70290135, pos = { x = -3825.345, y = 290.798, z = -2358.907 }, rot = { x = 0.000, y = 127.523, z = 0.000 }, level = 27, area_id = 13 },
	{ config_id = 34017, gadget_id = 70290135, pos = { x = -3818.292, y = 288.672, z = -2369.106 }, rot = { x = 6.758, y = 118.907, z = 0.000 }, level = 27, area_id = 13 },
	{ config_id = 34018, gadget_id = 70290135, pos = { x = -3808.036, y = 285.102, z = -2378.868 }, rot = { x = 38.754, y = 148.868, z = 0.000 }, level = 27, area_id = 13 },
	{ config_id = 34019, gadget_id = 70290135, pos = { x = -3807.688, y = 261.585, z = -2379.595 }, rot = { x = 29.252, y = 328.401, z = 0.000 }, level = 27, area_id = 13 },
	{ config_id = 34020, gadget_id = 70290135, pos = { x = -3814.966, y = 249.838, z = -2376.054 }, rot = { x = 0.000, y = 210.723, z = 0.000 }, level = 27, area_id = 13 },
	{ config_id = 34021, gadget_id = 70290135, pos = { x = -3821.897, y = 239.568, z = -2378.507 }, rot = { x = 0.000, y = 13.602, z = 0.000 }, level = 27, area_id = 13 },
	{ config_id = 34022, gadget_id = 70290135, pos = { x = -3820.260, y = 239.122, z = -2345.704 }, rot = { x = 0.000, y = 64.282, z = 0.000 }, level = 27, area_id = 13 },
	{ config_id = 34023, gadget_id = 70290135, pos = { x = -3814.069, y = 239.328, z = -2341.943 }, rot = { x = 0.000, y = 64.282, z = 0.000 }, level = 27, area_id = 13 },
	{ config_id = 34024, gadget_id = 70290135, pos = { x = -3893.860, y = 244.040, z = -2222.071 }, rot = { x = 10.977, y = 346.427, z = 348.871 }, level = 27, area_id = 13 },
	{ config_id = 34025, gadget_id = 70290135, pos = { x = -3880.266, y = 200.000, z = -2200.624 }, rot = { x = 14.664, y = 52.588, z = 5.329 }, level = 27, area_id = 13 },
	{ config_id = 34026, gadget_id = 70290135, pos = { x = -3864.574, y = 200.000, z = -2183.908 }, rot = { x = 9.503, y = 85.470, z = 12.406 }, level = 27, area_id = 13 }
}

-- 区域
regions = {
}

-- 触发器
triggers = {
	{ config_id = 1034007, name = "QUEST_FINISH_34007", event = EventType.EVENT_QUEST_FINISH, source = "7213009", condition = "", action = "action_EVENT_QUEST_FINISH_34007", trigger_count = 0 },
	{ config_id = 1034008, name = "QUEST_FINISH_34008", event = EventType.EVENT_QUEST_FINISH, source = "7212905", condition = "", action = "action_EVENT_QUEST_FINISH_34008", trigger_count = 0 },
	{ config_id = 1034027, name = "QUEST_FINISH_34027", event = EventType.EVENT_QUEST_FINISH, source = "7213006", condition = "", action = "action_EVENT_QUEST_FINISH_34027", trigger_count = 0 }
}

-- 变量
variables = {
}

--================================================================
-- 
-- 初始化配置
-- 
--================================================================

-- 初始化时创建
init_config = {
	suite = 1,
	end_suite = 0,
	rand_suite = false
}

--================================================================
-- 
-- 小组配置
-- 
--================================================================

suites = {
	{
		-- suite_id = 1,
		-- description = ,
		monsters = { },
		gadgets = { 34001, 34003, 34004, 34009, 34010, 34011, 34012, 34013, 34014, 34015, 34016, 34017, 34018, 34019, 34020, 34021, 34022, 34023, 34024, 34025, 34026 },
		regions = { },
		triggers = { "QUEST_FINISH_34007", "QUEST_FINISH_34008", "QUEST_FINISH_34027" },
		npcs = { 34002, 34005, 34006 },
		rand_weight = 100
	}
}

--================================================================
-- 
-- 触发器
-- 
--================================================================

-- 触发操作
function action_EVENT_QUEST_FINISH_34007(context, evt)
	-- 调用提示id为 321230061 的提示UI，会显示在屏幕中央偏下位置，id索引自 ReminderData表格
	if 0 ~= ScriptLib.ShowReminder(context, 321230061) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : active_reminder_ui")
		return -1
	end
	
	return 0
end

-- 触发操作
function action_EVENT_QUEST_FINISH_34008(context, evt)
	-- 将configid为 34001 的物件更改为状态 GadgetState.GearStop
	if 0 ~= ScriptLib.SetGadgetStateByConfigId(context, 34001, GadgetState.GearStop) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : set_gadget_state_by_configId")
			return -1
		end 
	
	return 0
end

-- 触发操作
function action_EVENT_QUEST_FINISH_34027(context, evt)
	-- 将configid为 34001 的物件更改为状态 GadgetState.GearStart
	if 0 ~= ScriptLib.SetGadgetStateByConfigId(context, 34001, GadgetState.GearStart) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : set_gadget_state_by_configId")
			return -1
		end 
	
	return 0
end