-- 基础信息
local base_info = {
	group_id = 133307132
}

--================================================================
-- 
-- 配置
-- 
--================================================================

-- 怪物
monsters = {
	{ config_id = 132001, monster_id = 21010401, pos = { x = -1869.075, y = 139.580, z = 5119.540 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, drop_tag = "远程丘丘人", disableWander = true, pose_id = 9012, area_id = 27 }
}

-- NPC
npcs = {
}

-- 装置
gadgets = {
	{ config_id = 132007, gadget_id = 70330392, pos = { x = -1869.349, y = 139.261, z = 5137.090 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132008, gadget_id = 70330392, pos = { x = -1859.257, y = 139.296, z = 5137.090 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132009, gadget_id = 70330392, pos = { x = -1859.257, y = 139.296, z = 5127.146 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132011, gadget_id = 70330392, pos = { x = -1879.406, y = 139.261, z = 5137.090 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132019, gadget_id = 70330392, pos = { x = -1859.257, y = 139.261, z = 5118.572 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132020, gadget_id = 70330392, pos = { x = -1869.328, y = 139.261, z = 5118.720 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132042, gadget_id = 70330392, pos = { x = -1869.264, y = 134.444, z = 5131.730 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132043, gadget_id = 70330392, pos = { x = -1874.028, y = 134.841, z = 5127.123 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132044, gadget_id = 70330392, pos = { x = -1864.631, y = 134.443, z = 5127.123 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132045, gadget_id = 70330392, pos = { x = -1869.264, y = 133.935, z = 5122.491 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132048, gadget_id = 70330392, pos = { x = -1883.982, y = 134.495, z = 5127.123 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132049, gadget_id = 70330392, pos = { x = -1884.046, y = 133.948, z = 5137.100 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132050, gadget_id = 70330392, pos = { x = -1874.053, y = 144.565, z = 5127.123 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132051, gadget_id = 70330392, pos = { x = -1869.395, y = 144.461, z = 5131.780 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132052, gadget_id = 70330392, pos = { x = -1883.841, y = 134.471, z = 5118.537 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132053, gadget_id = 70330392, pos = { x = -1879.156, y = 134.491, z = 5113.851 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132054, gadget_id = 70330392, pos = { x = -1869.358, y = 134.509, z = 5113.832 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132056, gadget_id = 70330392, pos = { x = -1864.711, y = 144.514, z = 5127.123 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132057, gadget_id = 70330392, pos = { x = -1859.359, y = 134.403, z = 5113.869 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132058, gadget_id = 70330392, pos = { x = -1859.594, y = 134.448, z = 5141.769 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132059, gadget_id = 70330392, pos = { x = -1884.128, y = 144.495, z = 5118.612 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132060, gadget_id = 70330392, pos = { x = -1884.057, y = 144.495, z = 5127.102 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132061, gadget_id = 70330392, pos = { x = -1884.057, y = 144.495, z = 5137.126 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132062, gadget_id = 70330392, pos = { x = -1879.351, y = 144.394, z = 5141.775 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132063, gadget_id = 70330392, pos = { x = -1869.575, y = 144.340, z = 5141.720 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132064, gadget_id = 70330392, pos = { x = -1859.703, y = 144.274, z = 5141.708 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132065, gadget_id = 70330392, pos = { x = -1854.625, y = 144.398, z = 5136.998 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132066, gadget_id = 70330392, pos = { x = -1854.554, y = 144.523, z = 5118.592 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132067, gadget_id = 70330392, pos = { x = -1854.567, y = 144.429, z = 5128.598 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132068, gadget_id = 70330392, pos = { x = -1859.380, y = 144.625, z = 5113.822 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132069, gadget_id = 70330392, pos = { x = -1869.259, y = 144.625, z = 5113.862 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132070, gadget_id = 70330392, pos = { x = -1854.558, y = 134.001, z = 5128.658 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132071, gadget_id = 70330392, pos = { x = -1854.547, y = 133.991, z = 5137.007 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132072, gadget_id = 70330392, pos = { x = -1879.371, y = 133.904, z = 5141.803 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132073, gadget_id = 70330392, pos = { x = -1869.575, y = 133.957, z = 5141.828 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132074, gadget_id = 70330392, pos = { x = -1879.132, y = 144.536, z = 5113.890 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132075, gadget_id = 70330392, pos = { x = -1874.078, y = 144.577, z = 5118.879 }, rot = { x = 90.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132077, gadget_id = 70330392, pos = { x = -1879.068, y = 136.794, z = 5128.132 }, rot = { x = 329.311, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132078, gadget_id = 70330392, pos = { x = -1879.068, y = 134.495, z = 5124.258 }, rot = { x = 329.311, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132079, gadget_id = 70330392, pos = { x = -1869.328, y = 149.376, z = 5118.565 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132080, gadget_id = 70330392, pos = { x = -1859.355, y = 149.376, z = 5118.565 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132081, gadget_id = 70330392, pos = { x = -1869.401, y = 149.376, z = 5127.044 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132082, gadget_id = 70330392, pos = { x = -1859.355, y = 149.376, z = 5127.032 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
	{ config_id = 132083, gadget_id = 70330392, pos = { x = -1859.355, y = 149.376, z = 5137.033 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 }
}

-- 区域
regions = {
}

-- 触发器
triggers = {
	{ config_id = 1132004, name = "VARIABLE_CHANGE_132004", event = EventType.EVENT_VARIABLE_CHANGE, source = "", condition = "condition_EVENT_VARIABLE_CHANGE_132004", action = "action_EVENT_VARIABLE_CHANGE_132004" },
	{ config_id = 1132039, name = "GROUP_LOAD_132039", event = EventType.EVENT_GROUP_LOAD, source = "", condition = "condition_EVENT_GROUP_LOAD_132039", action = "action_EVENT_GROUP_LOAD_132039", trigger_count = 0 }
}

-- 变量
variables = {
	{ config_id = 1, name = "finished", value = 0, no_refresh = true }
}

-- 废弃数据
garbages = {
	gadgets = {
		{ config_id = 132002, gadget_id = 70330264, pos = { x = -1869.264, y = 172.780, z = 5131.192 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132003, gadget_id = 70330264, pos = { x = -1873.531, y = 172.780, z = 5127.123 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132005, gadget_id = 70330264, pos = { x = -1865.349, y = 172.780, z = 5127.123 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132006, gadget_id = 70330264, pos = { x = -1869.264, y = 172.780, z = 5122.981 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132010, gadget_id = 70330393, pos = { x = -1878.480, y = 174.550, z = 5126.714 }, rot = { x = 1.158, y = 268.578, z = 65.642 }, level = 32, area_id = 27 },
		{ config_id = 132012, gadget_id = 70330264, pos = { x = -1883.674, y = 172.780, z = 5127.123 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132013, gadget_id = 70330264, pos = { x = -1883.787, y = 172.780, z = 5137.100 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132014, gadget_id = 70330264, pos = { x = -1873.531, y = 184.174, z = 5127.123 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132015, gadget_id = 70330264, pos = { x = -1869.264, y = 184.150, z = 5131.192 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132016, gadget_id = 70330264, pos = { x = -1883.593, y = 172.780, z = 5118.537 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132017, gadget_id = 70330264, pos = { x = -1879.297, y = 172.780, z = 5114.397 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132018, gadget_id = 70330264, pos = { x = -1869.358, y = 172.780, z = 5114.540 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132021, gadget_id = 70330264, pos = { x = -1865.207, y = 184.174, z = 5127.123 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132022, gadget_id = 70330264, pos = { x = -1859.359, y = 172.780, z = 5114.688 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132023, gadget_id = 70330264, pos = { x = -1854.998, y = 172.780, z = 5118.658 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132024, gadget_id = 70330264, pos = { x = -1883.555, y = 184.748, z = 5118.612 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132025, gadget_id = 70330264, pos = { x = -1883.484, y = 184.748, z = 5127.102 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132026, gadget_id = 70330264, pos = { x = -1883.484, y = 184.748, z = 5137.126 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132027, gadget_id = 70330264, pos = { x = -1879.542, y = 184.701, z = 5141.107 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132028, gadget_id = 70330264, pos = { x = -1869.575, y = 184.647, z = 5141.052 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132029, gadget_id = 70330264, pos = { x = -1859.703, y = 184.581, z = 5141.039 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132030, gadget_id = 70330264, pos = { x = -1855.686, y = 184.497, z = 5136.854 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132031, gadget_id = 70330264, pos = { x = -1855.615, y = 184.622, z = 5118.813 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132032, gadget_id = 70330264, pos = { x = -1855.628, y = 184.528, z = 5128.819 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132033, gadget_id = 70330264, pos = { x = -1859.655, y = 184.520, z = 5114.454 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132034, gadget_id = 70330264, pos = { x = -1869.534, y = 184.520, z = 5114.494 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132035, gadget_id = 70330264, pos = { x = -1855.133, y = 172.780, z = 5128.658 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132036, gadget_id = 70330264, pos = { x = -1855.133, y = 172.780, z = 5136.720 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132037, gadget_id = 70330264, pos = { x = -1879.542, y = 172.117, z = 5141.107 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132038, gadget_id = 70330264, pos = { x = -1869.575, y = 172.063, z = 5140.909 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132040, gadget_id = 70330264, pos = { x = -1879.534, y = 184.520, z = 5114.582 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132041, gadget_id = 70330264, pos = { x = -1873.531, y = 184.174, z = 5118.517 }, rot = { x = 0.000, y = 90.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132046, gadget_id = 70330392, pos = { x = -1859.257, y = 139.261, z = 5137.090 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132047, gadget_id = 70330393, pos = { x = -1879.531, y = 176.797, z = 5126.690 }, rot = { x = 1.707, y = 269.793, z = 65.673 }, level = 32, area_id = 27 },
		{ config_id = 132055, gadget_id = 70330392, pos = { x = -1841.317, y = 167.865, z = 5118.572 }, rot = { x = 90.000, y = 0.000, z = 0.000 }, level = 32, area_id = 27 },
		{ config_id = 132076, gadget_id = 70330393, pos = { x = -1877.827, y = 176.848, z = 5126.696 }, rot = { x = 1.707, y = 269.793, z = 65.673 }, level = 32, area_id = 27 }
	}
}

--================================================================
-- 
-- 初始化配置
-- 
--================================================================

-- 初始化时创建
init_config = {
	suite = 1,
	end_suite = 0,
	rand_suite = false
}

--================================================================
-- 
-- 小组配置
-- 
--================================================================

suites = {
	{
		-- suite_id = 1,
		-- description = ,
		monsters = { 132001 },
		gadgets = { 132007, 132008, 132009, 132011, 132019, 132020, 132042, 132043, 132044, 132045, 132048, 132049, 132050, 132051, 132052, 132053, 132054, 132056, 132057, 132058, 132059, 132060, 132061, 132062, 132063, 132064, 132065, 132066, 132067, 132068, 132069, 132070, 132071, 132072, 132073, 132074, 132075, 132077, 132078, 132079, 132080, 132081, 132082, 132083 },
		regions = { },
		triggers = { "VARIABLE_CHANGE_132004", "GROUP_LOAD_132039" },
		rand_weight = 100
	}
}

--================================================================
-- 
-- 触发器
-- 
--================================================================

-- 触发条件
function condition_EVENT_VARIABLE_CHANGE_132004(context, evt)
	if evt.param1 == evt.param2 then return false end
	
	-- 判断变量"finished"为1
	if ScriptLib.GetGroupVariableValue(context, "finished") ~= 1 then
			return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_VARIABLE_CHANGE_132004(context, evt)
		-- 杀死Group内所有gadget
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133307132, kill_policy = GroupKillPolicy.GROUP_KILL_GADGET }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : kill_gadget_by_group")
			return -1
		end
	
	return 0
end

-- 触发条件
function condition_EVENT_GROUP_LOAD_132039(context, evt)
	-- 判断变量"finished"为1
	if ScriptLib.GetGroupVariableValue(context, "finished") ~= 1 then
			return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GROUP_LOAD_132039(context, evt)
		-- 杀死Group内所有实体
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133307132, kill_policy = GroupKillPolicy.GROUP_KILL_ALL }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : kill_entity_by_group")
			return -1
		end
		
	
	return 0
end