-- 基础信息
local base_info = {
	group_id = 133220172
}

--================================================================
-- 
-- 配置
-- 
--================================================================

-- 怪物
monsters = {
}

-- NPC
npcs = {
}

-- 装置
gadgets = {
	{ config_id = 172001, gadget_id = 70900380, pos = { x = -2648.028, y = 297.306, z = -4449.161 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172002, gadget_id = 70900380, pos = { x = -2643.912, y = 301.683, z = -4465.031 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172003, gadget_id = 70900380, pos = { x = -2635.816, y = 303.483, z = -4482.972 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172004, gadget_id = 70900380, pos = { x = -2626.679, y = 306.052, z = -4502.018 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172005, gadget_id = 70900380, pos = { x = -2566.830, y = 320.741, z = -4522.533 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172006, gadget_id = 70900380, pos = { x = -2557.527, y = 330.149, z = -4517.173 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172007, gadget_id = 70900380, pos = { x = -2543.958, y = 338.227, z = -4510.949 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172008, gadget_id = 70900380, pos = { x = -2535.968, y = 340.256, z = -4501.141 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172009, gadget_id = 70900380, pos = { x = -2523.754, y = 341.437, z = -4498.030 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172010, gadget_id = 70900380, pos = { x = -2567.581, y = 398.180, z = -4477.551 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172011, gadget_id = 70900380, pos = { x = -2566.635, y = 406.075, z = -4493.237 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172012, gadget_id = 70900380, pos = { x = -2566.701, y = 416.381, z = -4508.144 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172013, gadget_id = 70900380, pos = { x = -2565.333, y = 431.902, z = -4519.232 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172014, gadget_id = 70900380, pos = { x = -2565.411, y = 446.496, z = -4524.566 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172015, gadget_id = 70900380, pos = { x = -2571.144, y = 458.002, z = -4520.038 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172016, gadget_id = 70900380, pos = { x = -2570.304, y = 452.217, z = -4503.282 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172017, gadget_id = 70900380, pos = { x = -2576.352, y = 446.450, z = -4489.118 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172018, gadget_id = 70900380, pos = { x = -2585.601, y = 439.186, z = -4481.123 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172019, gadget_id = 70900380, pos = { x = -2589.954, y = 432.100, z = -4473.220 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172020, gadget_id = 70900380, pos = { x = -2508.741, y = 343.155, z = -4489.460 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172021, gadget_id = 70900380, pos = { x = -2501.937, y = 352.171, z = -4477.938 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172022, gadget_id = 70900380, pos = { x = -2500.165, y = 369.472, z = -4470.478 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172023, gadget_id = 70290150, pos = { x = -2637.854, y = 303.044, z = -4478.909 }, rot = { x = 0.000, y = 309.772, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172024, gadget_id = 70290150, pos = { x = -2638.778, y = 303.145, z = -4476.997 }, rot = { x = 0.000, y = 309.772, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172025, gadget_id = 70290150, pos = { x = -2628.323, y = 306.095, z = -4499.708 }, rot = { x = 0.000, y = 309.772, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172026, gadget_id = 70290150, pos = { x = -2628.826, y = 306.096, z = -4498.809 }, rot = { x = 0.000, y = 309.772, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172027, gadget_id = 70290150, pos = { x = -2547.123, y = 337.992, z = -4512.070 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172028, gadget_id = 70290150, pos = { x = -2545.775, y = 338.113, z = -4511.611 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172030, gadget_id = 70290150, pos = { x = -2569.740, y = 454.293, z = -4508.804 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172031, gadget_id = 70290150, pos = { x = -2569.972, y = 453.260, z = -4506.010 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172032, gadget_id = 70900380, pos = { x = -2614.972, y = 307.252, z = -4514.146 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172033, gadget_id = 70290150, pos = { x = -2536.234, y = 340.315, z = -4503.286 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172034, gadget_id = 70290150, pos = { x = -2536.183, y = 340.317, z = -4504.400 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172035, gadget_id = 70900380, pos = { x = -2566.256, y = 457.628, z = -4526.246 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172036, gadget_id = 70290150, pos = { x = -2573.804, y = 448.905, z = -4493.361 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172037, gadget_id = 70290150, pos = { x = -2575.210, y = 447.531, z = -4491.007 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172039, gadget_id = 70290150, pos = { x = -2520.196, y = 342.425, z = -4498.489 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172040, gadget_id = 70290150, pos = { x = -2518.366, y = 342.778, z = -4498.256 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172042, gadget_id = 70290150, pos = { x = -2587.661, y = 438.975, z = -4480.249 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172043, gadget_id = 70290150, pos = { x = -2589.150, y = 437.888, z = -4478.483 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172044, gadget_id = 70710126, pos = { x = -2597.006, y = 308.943, z = -4526.986 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172045, gadget_id = 70350085, pos = { x = -2597.212, y = 308.844, z = -4526.878 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172047, gadget_id = 70710126, pos = { x = -2500.696, y = 369.568, z = -4455.651 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172048, gadget_id = 70350085, pos = { x = -2500.899, y = 369.604, z = -4455.543 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172050, gadget_id = 70350085, pos = { x = -2590.675, y = 424.415, z = -4469.668 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172051, gadget_id = 70360025, pos = { x = -2590.622, y = 424.429, z = -4469.715 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172053, gadget_id = 70350083, pos = { x = -2648.812, y = 291.865, z = -4434.377 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, persistent = true, area_id = 11 },
	{ config_id = 172074, gadget_id = 70330064, pos = { x = -2646.133, y = 291.613, z = -4437.589 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, interact_id = 35, area_id = 11 },
	{ config_id = 172075, gadget_id = 70330064, pos = { x = -2580.664, y = 314.012, z = -4530.060 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, interact_id = 35, area_id = 11 },
	{ config_id = 172076, gadget_id = 70330064, pos = { x = -2502.532, y = 370.078, z = -4452.606 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, interact_id = 35, area_id = 11 },
	{ config_id = 172078, gadget_id = 70290150, pos = { x = -2508.195, y = 344.206, z = -4486.870 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172079, gadget_id = 70290150, pos = { x = -2507.577, y = 344.426, z = -4484.498 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172080, gadget_id = 70290150, pos = { x = -2500.521, y = 372.642, z = -4470.271 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172081, gadget_id = 70290150, pos = { x = -2500.541, y = 374.555, z = -4470.170 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172093, gadget_id = 70710126, pos = { x = -2567.026, y = 391.556, z = -4463.249 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172094, gadget_id = 70350085, pos = { x = -2567.229, y = 391.637, z = -4463.141 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172096, gadget_id = 70330064, pos = { x = -2570.956, y = 391.554, z = -4468.187 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, interact_id = 35, area_id = 11 },
	{ config_id = 172097, gadget_id = 70900380, pos = { x = -2505.863, y = 380.383, z = -4457.164 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172098, gadget_id = 70900380, pos = { x = -2505.017, y = 396.249, z = -4457.588 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172099, gadget_id = 70900380, pos = { x = -2516.313, y = 403.141, z = -4460.326 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172100, gadget_id = 70900380, pos = { x = -2532.049, y = 402.039, z = -4457.214 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172101, gadget_id = 70900380, pos = { x = -2550.714, y = 400.113, z = -4462.802 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172102, gadget_id = 70290150, pos = { x = -2513.536, y = 403.612, z = -4459.145 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172103, gadget_id = 70290150, pos = { x = -2514.696, y = 403.551, z = -4459.742 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172106, gadget_id = 70290150, pos = { x = -2528.053, y = 402.675, z = -4457.961 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172107, gadget_id = 70290150, pos = { x = -2529.965, y = 402.184, z = -4457.578 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172110, gadget_id = 70290150, pos = { x = -2553.135, y = 400.242, z = -4463.750 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172111, gadget_id = 70290150, pos = { x = -2554.934, y = 400.214, z = -4464.431 }, rot = { x = 0.000, y = 268.165, z = 0.000 }, level = 1, area_id = 11 },
	{ config_id = 172114, gadget_id = 70350085, pos = { x = -2565.427, y = 463.866, z = -4525.939 }, rot = { x = 0.000, y = 0.000, z = 0.000 }, level = 1, area_id = 11 }
}

-- 区域
regions = {
	{ config_id = 172046, shape = RegionShape.SPHERE, radius = 5, pos = { x = -2597.027, y = 308.936, z = -4526.988 }, area_id = 11 },
	{ config_id = 172049, shape = RegionShape.SPHERE, radius = 5, pos = { x = -2500.711, y = 369.751, z = -4455.281 }, area_id = 11 },
	{ config_id = 172052, shape = RegionShape.SPHERE, radius = 5, pos = { x = -2590.191, y = 424.459, z = -4469.447 }, area_id = 11 },
	{ config_id = 172092, shape = RegionShape.SPHERE, radius = 10, pos = { x = -2649.011, y = 291.826, z = -4434.315 }, area_id = 11 },
	{ config_id = 172095, shape = RegionShape.SPHERE, radius = 5, pos = { x = -2567.512, y = 391.754, z = -4463.141 }, area_id = 11 },
	{ config_id = 172115, shape = RegionShape.SPHERE, radius = 4, pos = { x = -2565.710, y = 463.984, z = -4525.939 }, area_id = 11 }
}

-- 触发器
triggers = {
	{ config_id = 1172029, name = "ANY_GADGET_DIE_172029", event = EventType.EVENT_ANY_GADGET_DIE, source = "", condition = "condition_EVENT_ANY_GADGET_DIE_172029", action = "action_EVENT_ANY_GADGET_DIE_172029", trigger_count = 0 },
	{ config_id = 1172046, name = "ENTER_REGION_172046", event = EventType.EVENT_ENTER_REGION, source = "", condition = "condition_EVENT_ENTER_REGION_172046", action = "action_EVENT_ENTER_REGION_172046" },
	{ config_id = 1172049, name = "ENTER_REGION_172049", event = EventType.EVENT_ENTER_REGION, source = "", condition = "condition_EVENT_ENTER_REGION_172049", action = "action_EVENT_ENTER_REGION_172049" },
	{ config_id = 1172052, name = "ENTER_REGION_172052", event = EventType.EVENT_ENTER_REGION, source = "", condition = "condition_EVENT_ENTER_REGION_172052", action = "action_EVENT_ENTER_REGION_172052" },
	{ config_id = 1172054, name = "GADGET_CREATE_172054", event = EventType.EVENT_GADGET_CREATE, source = "", condition = "condition_EVENT_GADGET_CREATE_172054", action = "action_EVENT_GADGET_CREATE_172054", trigger_count = 0 },
	{ config_id = 1172055, name = "SELECT_OPTION_172055", event = EventType.EVENT_SELECT_OPTION, source = "", condition = "condition_EVENT_SELECT_OPTION_172055", action = "action_EVENT_SELECT_OPTION_172055", trigger_count = 0 },
	{ config_id = 1172090, name = "CHALLENGE_SUCCESS_172090", event = EventType.EVENT_CHALLENGE_SUCCESS, source = "", condition = "", action = "action_EVENT_CHALLENGE_SUCCESS_172090" },
	{ config_id = 1172091, name = "CHALLENGE_FAIL_172091", event = EventType.EVENT_CHALLENGE_FAIL, source = "", condition = "", action = "action_EVENT_CHALLENGE_FAIL_172091", trigger_count = 0 },
	{ config_id = 1172092, name = "ENTER_REGION_172092", event = EventType.EVENT_ENTER_REGION, source = "", condition = "", action = "action_EVENT_ENTER_REGION_172092" },
	{ config_id = 1172095, name = "ENTER_REGION_172095", event = EventType.EVENT_ENTER_REGION, source = "", condition = "condition_EVENT_ENTER_REGION_172095", action = "action_EVENT_ENTER_REGION_172095" },
	{ config_id = 1172115, name = "ENTER_REGION_172115", event = EventType.EVENT_ENTER_REGION, source = "", condition = "condition_EVENT_ENTER_REGION_172115", action = "action_EVENT_ENTER_REGION_172115" }
}

-- 变量
variables = {
}

--================================================================
-- 
-- 初始化配置
-- 
--================================================================

-- 初始化时创建
init_config = {
	suite = 1,
	end_suite = 0,
	rand_suite = false
}

--================================================================
-- 
-- 小组配置
-- 
--================================================================

suites = {
	{
		-- suite_id = 1,
		-- description = ,
		monsters = { },
		gadgets = { 172053 },
		regions = { 172092 },
		triggers = { "GADGET_CREATE_172054", "SELECT_OPTION_172055", "CHALLENGE_SUCCESS_172090", "CHALLENGE_FAIL_172091", "ENTER_REGION_172092" },
		rand_weight = 100
	},
	{
		-- suite_id = 2,
		-- description = ,
		monsters = { },
		gadgets = { 172001, 172002, 172003, 172004, 172023, 172024, 172025, 172026, 172032, 172044, 172045, 172074 },
		regions = { 172046 },
		triggers = { "ENTER_REGION_172046" },
		rand_weight = 100
	},
	{
		-- suite_id = 3,
		-- description = ,
		monsters = { },
		gadgets = { 172005, 172006, 172007, 172008, 172009, 172020, 172021, 172022, 172027, 172028, 172033, 172034, 172039, 172040, 172047, 172048, 172075, 172078, 172079 },
		regions = { 172049 },
		triggers = { "ENTER_REGION_172049" },
		rand_weight = 100
	},
	{
		-- suite_id = 4,
		-- description = ,
		monsters = { },
		gadgets = { 172076, 172093, 172094, 172097, 172098, 172099, 172100, 172101, 172102, 172103, 172106, 172107, 172110, 172111 },
		regions = { 172095 },
		triggers = { "ENTER_REGION_172095" },
		rand_weight = 100
	},
	{
		-- suite_id = 5,
		-- description = ,
		monsters = { },
		gadgets = { 172010, 172011, 172012, 172013, 172014, 172035, 172096, 172114 },
		regions = { 172115 },
		triggers = { "ENTER_REGION_172115" },
		rand_weight = 100
	},
	{
		-- suite_id = 6,
		-- description = ,
		monsters = { },
		gadgets = { 172015, 172016, 172017, 172018, 172019, 172030, 172031, 172036, 172037, 172042, 172043, 172050, 172051 },
		regions = { 172052 },
		triggers = { "ENTER_REGION_172052" },
		rand_weight = 100
	},
	{
		-- suite_id = 7,
		-- description = ,
		monsters = { },
		gadgets = { },
		regions = { },
		triggers = { "ANY_GADGET_DIE_172029" },
		rand_weight = 100
	}
}

--================================================================
-- 
-- 触发器
-- 
--================================================================

-- 触发条件
function condition_EVENT_ANY_GADGET_DIE_172029(context, evt)
	-- 所有物件的List
	local gadget_table = {
	    172023,
	    172024,
	    172025,
	    172026,
	    172027,
	    172028,
	    172030,
	    172031,
	    172033,
	    172034,
	    172036,
	    172037,
	    172039,
	    172040,
	    172042,
	    172043,
	    172078,
	    172079,
	    172102,
	    172103,
	    172106,
	    172107,
	    172110,
	    172111,
	}
	
	    for i,gadget_id in ipairs(gadget_table) do
	        if gadget_id == evt.param1 then
	            return true
	        end
	    end
	
	return false
end

-- 触发操作
function action_EVENT_ANY_GADGET_DIE_172029(context, evt)
	ScriptLib.ModifyFatherChallengeProperty(context, 101, FatherChallengeProperty.DURATION, 5)
	
	return 0
end

-- 触发条件
function condition_EVENT_ENTER_REGION_172046(context, evt)
	if evt.param1 ~= 172046 then return false end
	
	-- 判断角色数量不少于1
	if ScriptLib.GetRegionEntityCount(context, { region_eid = evt.source_eid, entity_type = EntityType.AVATAR }) < 1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_ENTER_REGION_172046(context, evt)
		-- 永久关闭CongfigId的Gadget，需要和Groups的RefreshWithBlock标签搭配
		if 0 ~= ScriptLib.KillEntityByConfigId(context, { config_id = 172044 }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : kill_entity_by_configId")
		    return -1
		end
		
	
	-- 添加suite3的新内容
	    ScriptLib.AddExtraGroupSuite(context, 133220172, 3)
	
	-- 删除suite2的所有内容
	    ScriptLib.RemoveExtraGroupSuite(context, 133220172, 2)
	
	return 0
end

-- 触发条件
function condition_EVENT_ENTER_REGION_172049(context, evt)
	if evt.param1 ~= 172049 then return false end
	
	-- 判断角色数量不少于1
	if ScriptLib.GetRegionEntityCount(context, { region_eid = evt.source_eid, entity_type = EntityType.AVATAR }) < 1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_ENTER_REGION_172049(context, evt)
		-- 永久关闭CongfigId的Gadget，需要和Groups的RefreshWithBlock标签搭配
		if 0 ~= ScriptLib.KillEntityByConfigId(context, { config_id = 172047 }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : kill_entity_by_configId")
		    return -1
		end
		
	
	-- 添加suite4的新内容
	    ScriptLib.AddExtraGroupSuite(context, 133220172, 4)
	
	-- 删除suite3的所有内容
	    ScriptLib.RemoveExtraGroupSuite(context, 133220172, 3)
	
	return 0
end

-- 触发条件
function condition_EVENT_ENTER_REGION_172052(context, evt)
	if evt.param1 ~= 172052 then return false end
	
	-- 判断角色数量不少于1
	if ScriptLib.GetRegionEntityCount(context, { region_eid = evt.source_eid, entity_type = EntityType.AVATAR }) < 1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_ENTER_REGION_172052(context, evt)
	-- 终止识别id为101的挑战，并判定成功
		ScriptLib.StopChallenge(context, 101, 1)
	
	return 0
end

-- 触发条件
function condition_EVENT_GADGET_CREATE_172054(context, evt)
	if 172053 ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_CREATE_172054(context, evt)
	-- 设置操作台选项
	if 0 ~= ScriptLib.SetWorktopOptionsByGroupId(context, 133220172, 172053, {175}) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : set_wok_options_by_configid")
		return -1
	end
	
	return 0
end

-- 触发条件
function condition_EVENT_SELECT_OPTION_172055(context, evt)
	-- 判断是gadgetid 172053 option_id 175
	if 172053 ~= evt.param1 then
		return false	
	end
	
	if 175 ~= evt.param2 then
		return false
	end
	
	
	return true
end

-- 触发操作
function action_EVENT_SELECT_OPTION_172055(context, evt)
	-- 开启操作台时确认当前有没有其他稻妻试炼的飞雷核挑战在进行
	if 0 ~= ScriptLib.GetGroupTempValue(context, "ElectricCorePlayHasStarted", {}) then
	    ScriptLib.ShowReminder(context, 400046)
	    return 0
	end
	
	if true == ScriptLib.CheckIsInMpMode(context) then
	    ScriptLib.ShowReminder(context, 400053)
	        return -1
	end
	
	-- 删除指定group： 133220172 ；指定config：172053；物件身上指定option：175；
	if 0 ~= ScriptLib.DelWorktopOptionByGroupId(context, 133220172, 172053, 175) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : del_work_options_by_group_configId")
		return -1
	end
	
	-- 将configid为 172053 的物件更改为状态 GadgetState.GearStart
	if 0 ~= ScriptLib.SetGadgetStateByConfigId(context, 172053, GadgetState.GearStart) then
	  ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : set_gadget_state_by_configId")
			return -1
		end 
	
	-- 添加suite2的新内容
	    ScriptLib.AddExtraGroupSuite(context, 133220172, 2)
	
	-- 添加suite7的新内容
	    ScriptLib.AddExtraGroupSuite(context, 133220172, 7)
	
	
	-- 创建编号为11167父挑战，indexID为101
	if 0 ~= ScriptLib.CreateFatherChallenge(context, 101, 111167, 60, {success = 1, fail = 1, fail_on_wipe=true}) then
	        return -1
	end
	
	
	-- 创建编号为201的子挑战：无用子挑战
	if 0 ~= ScriptLib.AttachChildChallenge(context, 101, 201, 111172, {999,6,172052,1},{},{success=0,fail=0}) then
	        return -1
	end
	
	
	-- 开始父挑战
	if 0 ~= ScriptLib.StartFatherChallenge(context, 101) then
	        return -1
	end
	
	-- 挑战开启将'ElectricCorePlayHasStarted'改为1
	local challenge_groups = {133220053,133220172,133212361,133212185,133212183,133212033}
	    for k,grp_id in pairs(challenge_groups) do
	                ScriptLib.SetGroupTempValue(context, "ElectricCorePlayHasStarted", 1, {group_id = grp_id})
	    end
	
	local uid_list = ScriptLib.GetSceneUidList(context)
	ScriptLib.SetGroupTempValue(context, "optimize_"..uid_list[1], 1, { group_id = 133220172})
	ScriptLib.SetPlayerGroupVisionType(context, {uid_list[1]}, {0})
	
	return 0
end

-- 触发操作
function action_EVENT_CHALLENGE_SUCCESS_172090(context, evt)
	-- 挑战结束将'ElectricCorePlayHasStarted'改为0
	local challenge_groups = {133220053,133220172,133212361,133212185,133212183,133212033}
	    for k,grp_id in pairs(challenge_groups) do
	                ScriptLib.SetGroupTempValue(context, "ElectricCorePlayHasStarted", 0, {group_id = grp_id})
	    end
	
	        local uid_list = ScriptLib.GetSceneUidList(context)
	        ScriptLib.SetGroupTempValue(context, "optimize_"..uid_list[1], 0, { group_id = 133220172})
	
		-- 重新生成指定group，指定suite
		if 0 ~= ScriptLib.RefreshGroup(context, { group_id = 133220172, suite = 1 }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : refresh_group_to_suite")
			return -1
		end
	
	
	
	return 0
end

-- 触发操作
function action_EVENT_CHALLENGE_FAIL_172091(context, evt)
	-- 挑战结束将'ElectricCorePlayHasStarted'改为0
	local challenge_groups = {133220053,133220172,133212361,133212185,133212183,133212033}
	    for k,grp_id in pairs(challenge_groups) do
	                ScriptLib.SetGroupTempValue(context, "ElectricCorePlayHasStarted", 0, {group_id = grp_id})
	    end
	
	        local uid_list = ScriptLib.GetSceneUidList(context)
	        ScriptLib.SetGroupTempValue(context, "optimize_"..uid_list[1], 0, { group_id = 133220172})
	
		-- 重新生成指定group，指定suite
		if 0 ~= ScriptLib.RefreshGroup(context, { group_id = 133220172, suite = 1 }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : refresh_group_to_suite")
			return -1
		end
	
	
	return 0
end

-- 触发操作
function action_EVENT_ENTER_REGION_172092(context, evt)
	-- 显示id为139的reminder
	if 0 ~= ScriptLib.AssignPlayerShowTemplateReminder(context,139,{param_uid_vec={},param_vec={},uid_vec={context.uid}}) then
	  return -1
	end
	
	return 0
end

-- 触发条件
function condition_EVENT_ENTER_REGION_172095(context, evt)
	if evt.param1 ~= 172095 then return false end
	
	-- 判断角色数量不少于1
	if ScriptLib.GetRegionEntityCount(context, { region_eid = evt.source_eid, entity_type = EntityType.AVATAR }) < 1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_ENTER_REGION_172095(context, evt)
		-- 永久关闭CongfigId的Gadget，需要和Groups的RefreshWithBlock标签搭配
		if 0 ~= ScriptLib.KillEntityByConfigId(context, { config_id = 172093 }) then
	    ScriptLib.PrintContextLog(context, "@@ LUA_WARNING : kill_entity_by_configId")
		    return -1
		end
		
	
	-- 添加suite5的新内容
	    ScriptLib.AddExtraGroupSuite(context, 133220172, 5)
	
	-- 删除suite4的所有内容
	    ScriptLib.RemoveExtraGroupSuite(context, 133220172, 4)
	
	return 0
end

-- 触发条件
function condition_EVENT_ENTER_REGION_172115(context, evt)
	if evt.param1 ~= 172115 then return false end
	
	-- 判断角色数量不少于1
	if ScriptLib.GetRegionEntityCount(context, { region_eid = evt.source_eid, entity_type = EntityType.AVATAR }) < 1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_ENTER_REGION_172115(context, evt)
	-- 添加suite6的新内容
	    ScriptLib.AddExtraGroupSuite(context, 133220172, 6)
	
	-- 删除suite5的所有内容
	    ScriptLib.RemoveExtraGroupSuite(context, 133220172, 5)
	
	return 0
end

require "V2_0/ElectricCore"